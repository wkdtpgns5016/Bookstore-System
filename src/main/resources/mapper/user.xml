<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.BookstoreSystem.dao.UserDao">
    <select id="selectUserList" resultType="com.example.BookstoreSystem.model.UserDto">
        select * from user
    </select>

    <select id="selectUserInfo" resultType="com.example.BookstoreSystem.model.UserDto">
        select * from user where id = #{userId}
    </select>

    <select id="selectUserAddressInfo" resultType="com.example.BookstoreSystem.model.UserAddressDto">
        select * from user_address where user_id = #{userId}
    </select>

    <select id="selectUserCardInfo" resultType="com.example.BookstoreSystem.model.UserCardDto">
        select * from user_card where user_id = #{userId}
    </select>

    <insert id="insertUserInfo" parameterType="com.example.BookstoreSystem.model.UserDto">
        INSERT INTO user
            (id, name, password)
        VALUES(#{user.id}, #{user.name}, #{user.password});
    </insert>

    <insert id="insertUserAddressInfo" parameterType="com.example.BookstoreSystem.model.UserAddressDto">
        INSERT INTO user_address
            (user_id, type, zone_code, address_default, address_detail)
        VALUES(#{address.userId},
               #{address.type},
               #{address.zoneCode},
               #{address.addressDefault},
               #{address.addressDetail});
    </insert>

    <insert id="insertUserCardInfo" parameterType="com.example.BookstoreSystem.model.UserCardDto">
        INSERT INTO user_card
            (user_id, number, expiration_date, type)
        VALUES(#{address.userId}, #{address.number}, #{address.expirationDate}, #{address.type});
    </insert>
</mapper>